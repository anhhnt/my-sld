<html>
<head>
</head>
<body>
  <script src="//unpkg.com/@feathersjs/client@^3.0.0/dist/feathers.js"></script>
  <script src="//unpkg.com/socket.io-client@1.7.3/dist/socket.io.js"></script>
  <script>
    var eventCode = 12234;
    // Socket.io is exposed as the `io` global.
    var socket = io('http://localhost:3030', {
      path: `/event/${eventCode}`
    });

    // @feathersjs/client is exposed as the `feathers` global.
    var app = feathers();

    // Set up Socket.io client with the socket
    app.configure(feathers.socketio(socket));

    app.configure(feathers.auth({
      header: 'Authorization', // the default authorization header for REST
      path: '/authentication', // the server-side authentication service path
      jwtStrategy: 'jwt', // the name of the JWT authentication strategy
      entity: 'user', // the entity you are authenticating (ie. a users)
      service: 'users', // the service to look up the entity
      cookie: 'feathers-jwt', // the name of the cookie to parse the JWT from when cookies are enabled server side
      storageKey: 'feathers-jwt', // the key to store the accessToken in localstorage or AsyncStorage on React Native
      storage: undefined // Passing a WebStorage-compatible object to enable automatic storage on the client.
    }));

    // Receive real-time events through Socket.io
    app.service('questions')
      .on('created', message => console.log('New message created', message));

    // Call the `messages` service
    // app.service('questions').create({
    //   eventCode: eventCode,
    //   question: {
    //     content: 'A question from a REST client'
    //   }
    // });
    app.service('messages').create({
      text: 'Test message'
    });

    // feathers.errors is an object with all of the custom error types.
  </script>
</body>
</html>
